<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUTLER - Behavioral Understanding & Tactical Law Enforcement Resource</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://unpkg.com/lucide-react@latest/dist/umd/lucide-react.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    animation: {
                        'bounce': 'bounce 1s infinite',
                        'pulse': 'pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite'
                    }
                }
            }
        }
    </script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const {
            Send, Mail, Users, Activity, AlertCircle, CheckCircle, Clock,
            Search, Filter, ChevronRight, Shield, Database, Zap
        } = lucideReact;

        const ButlerSystem = () => {
            const [messages, setMessages] = useState([
                { id: 1, type: 'system', content: 'BUTLER Intelligence System initialized for Dallas County', timestamp: new Date().toISOString() }
            ]);
            const [input, setInput] = useState('');
            const [activeTab, setActiveTab] = useState('assistant');
            const [listservEmails, setListservEmails] = useState([
                {
                    id: 1,
                    from: 'unknown_428@protonmail.com',
                    subject: 'Meeting confirmed - Oak Cliff location',
                    priority: 'critical',
                    threatScore: 95,
                    unread: true,
                    time: '1 min ago',
                    body: 'Everyone needs to be there at 2am. Bring the packages discussed. Park on different blocks. No phones after midnight.',
                    analysis: 'CRITICAL THREAT: Encrypted email service, gang-related keywords, specific location/time, operational security measures mentioned'
                },
                {
                    id: 2,
                    from: 'dorothy.henderson@gmail.com',
                    subject: 'Sewage backed up AGAIN - 3rd time this month!!!',
                    priority: 'low',
                    threatScore: 5,
                    unread: true,
                    time: '5 min ago',
                    body: 'Dear County, My sewage is backed up again at 4521 Elm Street. This is the third time this month! I am 82 years old and cannot deal with this. Please send someone immediately. The smell is terrible and my cat Mr. Whiskers is very upset. Sincerely, Dorothy Henderson',
                    analysis: 'NON-THREAT: Routine municipal complaint. Route to Public Works for standard service request.'
                },
                {
                    id: 3,
                    from: 'dpd_tip_line@dallascityhall.com',
                    subject: 'Anonymous tip - Large gathering tonight',
                    priority: 'critical',
                    threatScore: 92,
                    unread: true,
                    time: '8 min ago',
                    body: 'Caller reports seeing known gang members recruiting at Kiest Park. Mentioned retaliation for last week incident. Multiple vehicles staging near Industrial Blvd.',
                    analysis: 'HIGH THREAT: Correlates with other intelligence. Gang activity, retaliation mentioned, specific locations match pattern.'
                },
                {
                    id: 4,
                    from: 'alerts@ringcentral.com',
                    subject: 'Security cameras triggered - Sequential pattern detected',
                    priority: 'high',
                    threatScore: 88,
                    unread: true,
                    time: '12 min ago',
                    body: 'Automated Alert: 15 cameras triggered in sequence along Industrial Blvd corridor. Pattern suggests coordinated movement of 4-5 vehicles. License plate partial: TX-K9...',
                    analysis: 'SURVEILLANCE ALERT: Automated system detecting coordinated movement. Matches geographic pattern of suspected activity.'
                },
                {
                    id: 5,
                    from: 'mary.johnson@dallascounty.org',
                    subject: 'Potluck reminder - Accounting Dept Friday',
                    priority: 'low',
                    threatScore: 0,
                    unread: false,
                    time: '30 min ago',
                    body: 'Don\'t forget the potluck this Friday! I\'m bringing my famous potato salad. Sign-up sheet attached. Please RSVP by Thursday.',
                    analysis: 'NON-THREAT: Internal social event. No security concerns.'
                },
                {
                    id: 6,
                    from: 'throwaway9821@tutanota.com',
                    subject: 'RE: Equipment ready',
                    priority: 'high',
                    threatScore: 85,
                    unread: true,
                    time: '45 min ago',
                    body: 'Got the tools from the supplier. South Dallas dropoff point active. Blue house with the broken fence. Cash only as discussed.',
                    analysis: 'SUSPICIOUS: Encrypted email, coded language possibly indicating illegal transaction, specific location mentioned.'
                },
                {
                    id: 7,
                    from: 'it.security@dallascounty.org',
                    subject: 'Phishing attempt detected - Do not click links',
                    priority: 'normal',
                    threatScore: 25,
                    unread: false,
                    time: '1 hour ago',
                    body: 'IT Security has detected a phishing email campaign targeting county employees. Do not click any links claiming to be from payroll.',
                    analysis: 'SECURITY NOTICE: Standard IT security alert. Important for awareness but not immediate threat.'
                },
                {
                    id: 8,
                    from: 'robert.williams@yahoo.com',
                    subject: 'Street light out on Jefferson Blvd',
                    priority: 'low',
                    threatScore: 15,
                    unread: false,
                    time: '2 hours ago',
                    body: 'The street light at Jefferson and Beckley has been out for a week. Very dark and dangerous at night. Please fix.',
                    analysis: 'INFRASTRUCTURE: Routine maintenance request. Note: Location matches area of concern - possible surveillance vulnerability.'
                },
                {
                    id: 9,
                    from: 'dallas_watch_823@gmail.com',
                    subject: 'Suspicious vehicles - Multiple reports',
                    priority: 'high',
                    threatScore: 78,
                    unread: false,
                    time: '3 hours ago',
                    body: 'Citizens reporting black SUVs circling blocks near Jefferson and Beckley. At least 3 vehicles, tinted windows, no plates visible.',
                    analysis: 'SURVEILLANCE WARNING: Multiple citizen reports, suspicious behavior, area matches other intelligence.'
                },
                {
                    id: 10,
                    from: 'jose.martinez@dallascounty.org',
                    subject: 'Budget meeting rescheduled to Tuesday',
                    priority: 'normal',
                    threatScore: 0,
                    unread: false,
                    time: '4 hours ago',
                    body: 'The quarterly budget review has been moved to Tuesday at 2 PM in Conference Room B. Updated spreadsheets will be sent Monday.',
                    analysis: 'ADMINISTRATIVE: Routine county business. No security implications.'
                },
                {
                    id: 11,
                    from: 'emergency.mgmt@dallascounty.org',
                    subject: 'Severe Weather Alert - Tornado Watch',
                    priority: 'high',
                    threatScore: 30,
                    unread: false,
                    time: '5 hours ago',
                    body: 'National Weather Service has issued a tornado watch for Dallas County effective until 10 PM. All emergency personnel on standby.',
                    analysis: 'WEATHER ALERT: Legitimate emergency management communication. Prepare for possible citizen safety issues.'
                },
                {
                    id: 12,
                    from: 'concerned_citizen_99@hotmail.com',
                    subject: 'Loud music complaint - 3am every night!!!',
                    priority: 'low',
                    threatScore: 8,
                    unread: false,
                    time: '6 hours ago',
                    body: 'My neighbors at 1847 Oak Street play loud music every night until 3am. I have called police 5 times. Nothing done! This is unacceptable!',
                    analysis: 'NOISE COMPLAINT: Quality of life issue. Route to appropriate department for follow-up.'
                }
            ]);
            const [isProcessing, setIsProcessing] = useState(false);
            const [systemMetrics, setSystemMetrics] = useState({
                emailsProcessed: 1247,
                activeAlerts: 3,
                responseTime: '0.8s',
                uptime: '99.9%'
            });
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const handleSend = async () => {
                if (!input.trim()) return;

                const userMessage = {
                    id: messages.length + 1,
                    type: 'user',
                    content: input,
                    timestamp: new Date().toISOString()
                };

                setMessages(prev => [...prev, userMessage]);
                setInput('');
                setIsProcessing(true);

                // Simulate AI response
                setTimeout(() => {
                    const aiResponse = {
                        id: messages.length + 2,
                        type: 'butler',
                        content: generateButlerResponse(input),
                        timestamp: new Date().toISOString()
                    };
                    setMessages(prev => [...prev, aiResponse]);
                    setIsProcessing(false);
                }, 1500);
            };

            const generateButlerResponse = (query) => {
                const lowerQuery = query.toLowerCase();

                if (lowerQuery.includes('weather') || lowerQuery.includes('alert')) {
                    return 'I\'ve analyzed the severe weather alert from Emergency Management. A thunderstorm warning is in effect for northern Dallas County until 6:00 PM. I\'ve notified all field personnel and updated the emergency response protocols. Facilities have been secured.';
                } else if (lowerQuery.includes('security') || lowerQuery.includes('patch')) {
                    return 'The security patch deployment is scheduled for tonight at 11:00 PM. All critical systems will remain operational. I\'ve verified compatibility with county infrastructure and prepared rollback procedures. No action required from your end.';
                } else if (lowerQuery.includes('email') || lowerQuery.includes('listserv')) {
                    return `I'm monitoring ${systemMetrics.emailsProcessed} emails across 14 department listservs. Currently tracking ${systemMetrics.activeAlerts} high-priority items requiring attention. All automated responses are functioning within normal parameters.`;
                } else if (lowerQuery.includes('status') || lowerQuery.includes('system')) {
                    return `System Status: All operational. Response time averaging ${systemMetrics.responseTime}. Uptime: ${systemMetrics.uptime}. I'm actively monitoring county communications and ready to assist with any departmental needs.`;
                } else {
                    return 'I understand your request. I\'m analyzing relevant county data and communications to provide the most accurate response. How can I assist you with Dallas County operations today?';
                }
            };

            const handleListservAction = (emailId, action) => {
                if (action === 'analyze') {
                    const email = listservEmails.find(e => e.id === emailId);
                    if (email) {
                        const correlatedEmails = listservEmails.filter(e =>
                            e.id !== emailId &&
                            (e.body.includes('Oak Cliff') || e.body.includes('Jefferson') || e.body.includes('Industrial'))
                        );

                        let content = `BUTLER INTELLIGENCE ANALYSIS\n`;
                        content += `${'='.repeat(50)}\n\n`;
                        content += `EMAIL: ${email.subject}\n`;
                        content += `FROM: ${email.from}\n`;
                        content += `TIME: ${email.time}\n`;
                        content += `THREAT SCORE: ${email.threatScore || 0}/100\n\n`;
                        content += `CONTENT ANALYSIS:\n`;
                        content += `"${email.body}"\n\n`;
                        content += `AI ASSESSMENT:\n`;
                        content += `${email.analysis}\n\n`;

                        if (correlatedEmails.length > 0) {
                            content += `CORRELATION DETECTED:\n`;
                            content += `Found ${correlatedEmails.length} related communications:\n`;
                            correlatedEmails.forEach(ce => {
                                content += `â€¢ "${ce.subject}" (Threat: ${ce.threatScore || 0})\n`;
                            });
                            content += `\n`;
                        }

                        if (email.threatScore >= 80) {
                            content += `RECOMMENDED ACTIONS:\n`;
                            content += `1. Alert field units immediately\n`;
                            content += `2. Cross-reference with gang intelligence database\n`;
                            content += `3. Deploy surveillance to mentioned locations\n`;
                            content += `4. Prepare tactical response team\n`;
                        } else if (email.threatScore >= 50) {
                            content += `RECOMMENDED ACTIONS:\n`;
                            content += `1. Monitor for additional intelligence\n`;
                            content += `2. Add to daily briefing\n`;
                            content += `3. Request additional information from source\n`;
                        } else if (email.threatScore < 20) {
                            content += `RECOMMENDED ACTIONS:\n`;
                            content += `1. Route to appropriate department (${email.from.includes('henderson') ? 'Public Works' : 'Standard Processing'})\n`;
                            content += `2. Log for records\n`;
                            content += `3. No security action required\n`;
                        }

                        const analysisMessage = {
                            id: messages.length + 1,
                            type: 'butler',
                            content: content,
                            timestamp: new Date().toISOString()
                        };
                        setMessages(prev => [...prev, analysisMessage]);
                        setActiveTab('assistant');
                    }
                }
            };

            const getQuickActionResponse = (action) => {
                const now = new Date();
                const timeStr = now.toLocaleTimeString();
                const dateStr = now.toLocaleDateString();

                if (action.includes('daily brief')) {
                    return `DAILY INTELLIGENCE BRIEF - ${dateStr}\n\n` +
                        `HIGH PRIORITY ALERTS:\n` +
                        `â€¢ Gang activity detected in Oak Cliff - 92% correlation confidence\n` +
                        `â€¢ 5 suspicious emails flagged (threat scores 72-95)\n` +
                        `â€¢ Weather advisory: Severe thunderstorm watch until 10 PM\n\n` +
                        `STATISTICS (Last 24 Hours):\n` +
                        `â€¢ Emails processed: 342\n` +
                        `â€¢ Threats identified: 8\n` +
                        `â€¢ Response time: ${systemMetrics.responseTime}\n` +
                        `â€¢ Active incidents: 3\n\n` +
                        `RECOMMENDED ACTIONS:\n` +
                        `1. Deploy additional units to Oak Cliff\n` +
                        `2. Review flagged communications\n` +
                        `3. Prepare for weather-related incidents`;
                } else if (action.includes('security alerts')) {
                    return `ACTIVE SECURITY ALERTS - ${timeStr}\n\n` +
                        `ðŸ”´ CRITICAL (1):\n` +
                        `â€¢ Coordinated gang operation suspected - Oak Cliff area\n\n` +
                        `ðŸŸ¡ HIGH (3):\n` +
                        `â€¢ Suspicious email pattern detected from encrypted services\n` +
                        `â€¢ Multiple cameras triggered on Industrial Blvd\n` +
                        `â€¢ Anonymous tip received about gathering tonight\n\n` +
                        `ðŸŸ¢ MEDIUM (2):\n` +
                        `â€¢ Weather warning - North Dallas\n` +
                        `â€¢ IT maintenance window tonight 2-4 AM`;
                } else if (action.includes('pending approvals')) {
                    return `PENDING APPROVALS - ${dateStr}\n\n` +
                        `Awaiting your review:\n\n` +
                        `1. Tactical Response Plan - Oak Cliff Operation\n` +
                        `   Priority: URGENT\n` +
                        `   Submitted by: Intelligence Division\n\n` +
                        `2. Resource Allocation Request - Extra Units\n` +
                        `   Priority: HIGH\n` +
                        `   Requested by: Field Operations\n\n` +
                        `3. Communications Protocol Update\n` +
                        `   Priority: STANDARD\n` +
                        `   Submitted by: IT Security\n\n` +
                        `4. Weekly Report Sign-off\n` +
                        `   Priority: ROUTINE\n` +
                        `   Due: End of day`;
                } else if (action.includes('listserv traffic')) {
                    return `LISTSERV TRAFFIC ANALYSIS - ${timeStr}\n\n` +
                        `VOLUME METRICS:\n` +
                        `â€¢ Total emails (24h): 342\n` +
                        `â€¢ Flagged as suspicious: 8 (2.3%)\n` +
                        `â€¢ Average threat score: 42/100\n\n` +
                        `PATTERN DETECTION:\n` +
                        `â€¢ Spike in encrypted email services (ProtonMail, Tutanota)\n` +
                        `â€¢ Gang-related keywords increased 300%\n` +
                        `â€¢ Geographic clustering: Oak Cliff, South Dallas\n\n` +
                        `TOP THREATS:\n` +
                        `1. "Anonymous tip - URGENT" (Score: 95)\n` +
                        `2. "Multiple security cameras triggered" (Score: 90)\n` +
                        `3. "Meeting confirmed - Oak Cliff" (Score: 85)\n\n` +
                        `RECOMMENDATION: Immediate review of high-threat communications`;
                }
                return 'Processing your request...';
            };

            return React.createElement('div', { className: "flex flex-col h-screen bg-slate-50" }, [
                // Header
                React.createElement('header', { key: 'header', className: "bg-gradient-to-r from-slate-800 to-slate-900 text-white shadow-lg" }, [
                    React.createElement('div', { key: 'header-content', className: "px-6 py-4" }, [
                        React.createElement('div', { key: 'header-inner', className: "flex items-center justify-between" }, [
                            React.createElement('div', { key: 'header-left', className: "flex items-center space-x-4" }, [
                                React.createElement('div', { key: 'logo-section', className: "flex items-center space-x-3" }, [
                                    React.createElement(Shield, { key: 'shield-icon', className: "w-8 h-8 text-blue-400" }),
                                    React.createElement('div', { key: 'title-section' }, [
                                        React.createElement('h1', { key: 'title', className: "text-2xl font-bold tracking-tight" }, 'BUTLER'),
                                        React.createElement('p', { key: 'subtitle', className: "text-xs text-slate-300 uppercase tracking-wider" }, 'Behavioral Understanding & Tactical Law Enforcement Resource')
                                    ])
                                ])
                            ]),
                            React.createElement('div', { key: 'header-right', className: "flex items-center space-x-6 text-sm" }, [
                                React.createElement('div', { key: 'location', className: "flex items-center space-x-2" }, [
                                    React.createElement(Database, { key: 'db-icon', className: "w-4 h-4 text-green-400" }),
                                    React.createElement('span', { key: 'location-text' }, 'Dallas County, TX')
                                ]),
                                React.createElement('div', { key: 'status', className: "flex items-center space-x-2" }, [
                                    React.createElement(Activity, { key: 'activity-icon', className: "w-4 h-4 text-green-400 animate-pulse" }),
                                    React.createElement('span', { key: 'status-text' }, 'System Active')
                                ])
                            ])
                        ])
                    ])
                ]),

                // Metrics Bar
                React.createElement('div', { key: 'metrics', className: "bg-white border-b border-slate-200 px-6 py-3" }, [
                    React.createElement('div', { key: 'metrics-grid', className: "grid grid-cols-4 gap-4" }, [
                        React.createElement('div', { key: 'metric-1', className: "flex items-center space-x-3" }, [
                            React.createElement(Mail, { key: 'mail-icon', className: "w-5 h-5 text-slate-600" }),
                            React.createElement('div', { key: 'metric-1-text' }, [
                                React.createElement('p', { key: 'metric-1-label', className: "text-xs text-slate-500" }, 'Emails Processed'),
                                React.createElement('p', { key: 'metric-1-value', className: "text-lg font-semibold text-slate-900" }, systemMetrics.emailsProcessed.toLocaleString())
                            ])
                        ]),
                        React.createElement('div', { key: 'metric-2', className: "flex items-center space-x-3" }, [
                            React.createElement(AlertCircle, { key: 'alert-icon', className: "w-5 h-5 text-amber-600" }),
                            React.createElement('div', { key: 'metric-2-text' }, [
                                React.createElement('p', { key: 'metric-2-label', className: "text-xs text-slate-500" }, 'Active Alerts'),
                                React.createElement('p', { key: 'metric-2-value', className: "text-lg font-semibold text-slate-900" }, systemMetrics.activeAlerts)
                            ])
                        ]),
                        React.createElement('div', { key: 'metric-3', className: "flex items-center space-x-3" }, [
                            React.createElement(Zap, { key: 'zap-icon', className: "w-5 h-5 text-slate-600" }),
                            React.createElement('div', { key: 'metric-3-text' }, [
                                React.createElement('p', { key: 'metric-3-label', className: "text-xs text-slate-500" }, 'Response Time'),
                                React.createElement('p', { key: 'metric-3-value', className: "text-lg font-semibold text-slate-900" }, systemMetrics.responseTime)
                            ])
                        ]),
                        React.createElement('div', { key: 'metric-4', className: "flex items-center space-x-3" }, [
                            React.createElement(CheckCircle, { key: 'check-icon', className: "w-5 h-5 text-green-600" }),
                            React.createElement('div', { key: 'metric-4-text' }, [
                                React.createElement('p', { key: 'metric-4-label', className: "text-xs text-slate-500" }, 'System Uptime'),
                                React.createElement('p', { key: 'metric-4-value', className: "text-lg font-semibold text-slate-900" }, systemMetrics.uptime)
                            ])
                        ])
                    ])
                ]),

                // Main Content
                React.createElement('div', { key: 'main', className: "flex flex-1 overflow-hidden" }, [
                    // Sidebar
                    React.createElement('div', { key: 'sidebar', className: "w-80 bg-white border-r border-slate-200 flex flex-col" }, [
                        React.createElement('div', { key: 'tabs', className: "border-b border-slate-200" }, [
                            React.createElement('div', { key: 'tab-buttons', className: "flex" }, [
                                React.createElement('button', {
                                    key: 'assistant-tab',
                                    onClick: () => setActiveTab('assistant'),
                                    className: `flex-1 px-4 py-3 text-sm font-medium transition-colors ${
                                        activeTab === 'assistant'
                                            ? 'text-blue-600 border-b-2 border-blue-600 bg-blue-50'
                                            : 'text-slate-600 hover:text-slate-900 hover:bg-slate-50'
                                    }`
                                }, 'AI Assistant'),
                                React.createElement('button', {
                                    key: 'listserv-tab',
                                    onClick: () => setActiveTab('listserv'),
                                    className: `flex-1 px-4 py-3 text-sm font-medium transition-colors ${
                                        activeTab === 'listserv'
                                            ? 'text-blue-600 border-b-2 border-blue-600 bg-blue-50'
                                            : 'text-slate-600 hover:text-slate-900 hover:bg-slate-50'
                                    }`
                                }, 'Listserv Monitor')
                            ])
                        ]),

                        // Listserv Content
                        activeTab === 'listserv' && React.createElement('div', { key: 'listserv-content', className: "flex-1 overflow-y-auto" }, [
                            React.createElement('div', { key: 'search-bar', className: "p-4 border-b border-slate-200 bg-slate-50" }, [
                                React.createElement('div', { key: 'search-inner', className: "flex items-center space-x-2" }, [
                                    React.createElement(Search, { key: 'search-icon', className: "w-4 h-4 text-slate-400" }),
                                    React.createElement('input', {
                                        key: 'search-input',
                                        type: "text",
                                        placeholder: "Search emails...",
                                        className: "flex-1 text-sm bg-white border border-slate-200 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    }),
                                    React.createElement('button', { key: 'filter-btn', className: "p-1 hover:bg-slate-200 rounded" }, [
                                        React.createElement(Filter, { key: 'filter-icon', className: "w-4 h-4 text-slate-600" })
                                    ])
                                ])
                            ]),
                            React.createElement('div', { key: 'email-list', className: "divide-y divide-slate-200" },
                                listservEmails.map(email =>
                                    React.createElement('div', {
                                        key: email.id,
                                        className: `p-4 hover:bg-slate-50 cursor-pointer transition-colors ${
                                            email.unread ? 'bg-blue-50' : ''
                                        }`,
                                        onClick: () => handleListservAction(email.id, 'analyze')
                                    }, [
                                        React.createElement('div', { key: 'email-content', className: "flex items-start justify-between" }, [
                                            React.createElement('div', { key: 'email-info', className: "flex-1 min-w-0" }, [
                                                React.createElement('div', { key: 'email-from', className: "flex items-center space-x-2" }, [
                                                    email.unread && React.createElement('div', { key: 'unread-dot', className: "w-2 h-2 bg-blue-600 rounded-full" }),
                                                    React.createElement('p', { key: 'from-text', className: "text-sm font-medium text-slate-900 truncate" }, email.from)
                                                ]),
                                                React.createElement('p', { key: 'subject', className: "text-sm text-slate-900 font-medium mt-1" }, email.subject),
                                                React.createElement('div', { key: 'email-meta', className: "flex items-center space-x-3 mt-2" }, [
                                                    React.createElement('span', {
                                                        key: 'threat-badge',
                                                        className: `inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${
                                                            email.threatScore >= 80
                                                                ? 'bg-red-100 text-red-800 animate-pulse'
                                                                : email.threatScore >= 50
                                                                ? 'bg-orange-100 text-orange-800'
                                                                : email.threatScore >= 20
                                                                ? 'bg-yellow-100 text-yellow-800'
                                                                : 'bg-green-100 text-green-800'
                                                        }`
                                                    }, `Threat: ${email.threatScore || 0}`),
                                                    React.createElement('span', {
                                                        key: 'priority-badge',
                                                        className: `inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${
                                                            email.priority === 'critical'
                                                                ? 'bg-red-600 text-white'
                                                                : email.priority === 'high'
                                                                ? 'bg-red-100 text-red-800'
                                                                : 'bg-slate-100 text-slate-700'
                                                        }`
                                                    }, email.priority),
                                                    React.createElement('span', { key: 'time', className: "text-xs text-slate-500" }, email.time)
                                                ])
                                            ]),
                                            React.createElement(ChevronRight, { key: 'chevron', className: "w-4 h-4 text-slate-400 mt-1" })
                                        ])
                                    ])
                                )
                            )
                        ]),

                        // Assistant Content
                        activeTab === 'assistant' && React.createElement('div', { key: 'assistant-content', className: "flex-1 p-4 overflow-y-auto" }, [
                            React.createElement('div', { key: 'assistant-panels', className: "space-y-3" }, [
                                React.createElement('div', { key: 'quick-actions', className: "bg-blue-50 border border-blue-200 rounded-lg p-3" }, [
                                    React.createElement('h3', { key: 'qa-title', className: "text-sm font-medium text-blue-900 mb-2" }, 'Quick Actions'),
                                    React.createElement('div', { key: 'qa-buttons', className: "space-y-2" }, [
                                        { text: 'â†’ Generate daily brief', action: 'Generate a comprehensive daily intelligence brief' },
                                        { text: 'â†’ Check security alerts', action: 'Show all active security alerts and threats' },
                                        { text: 'â†’ Review pending approvals', action: 'List all pending approvals requiring attention' },
                                        { text: 'â†’ Analyze listserv traffic', action: 'Analyze recent listserv email patterns' }
                                    ].map((item, i) =>
                                        React.createElement('button', {
                                            key: `action-${i}`,
                                            className: "w-full text-left text-sm text-blue-700 hover:text-blue-900 hover:bg-blue-100 rounded px-2 py-1 transition-colors",
                                            onClick: () => {
                                                const userMsg = {
                                                    id: Date.now(),
                                                    type: 'user',
                                                    content: item.action,
                                                    timestamp: new Date().toISOString()
                                                };
                                                const assistantMsg = {
                                                    id: Date.now() + 1,
                                                    type: 'butler',
                                                    content: getQuickActionResponse(item.text),
                                                    timestamp: new Date().toISOString()
                                                };
                                                setMessages(prev => [...prev, userMsg, assistantMsg]);
                                                setActiveTab('assistant');
                                            }
                                        }, item.text)
                                    ))
                                ]),
                                React.createElement('div', { key: 'recent-alerts', className: "bg-amber-50 border border-amber-200 rounded-lg p-3" }, [
                                    React.createElement('h3', { key: 'ra-title', className: "text-sm font-medium text-amber-900 mb-2" }, 'Recent Alerts'),
                                    React.createElement('div', { key: 'ra-list', className: "space-y-1 text-xs text-amber-800" }, [
                                        'Weather warning - North Dallas',
                                        'IT maintenance window tonight',
                                        'Budget review deadline Friday'
                                    ].map((alert, i) =>
                                        React.createElement('div', { key: `alert-${i}`, className: "flex items-center space-x-2" }, [
                                            React.createElement(Clock, { key: `clock-${i}`, className: "w-3 h-3" }),
                                            React.createElement('span', { key: `alert-text-${i}` }, alert)
                                        ])
                                    ))
                                ])
                            ])
                        ])
                    ]),

                    // Chat Area
                    React.createElement('div', { key: 'chat', className: "flex-1 flex flex-col bg-white" }, [
                        React.createElement('div', { key: 'messages', className: "flex-1 overflow-y-auto p-6" }, [
                            React.createElement('div', { key: 'message-container', className: "max-w-3xl mx-auto space-y-4" }, [
                                ...messages.map(message =>
                                    React.createElement('div', {
                                        key: message.id,
                                        className: `flex ${message.type === 'user' ? 'justify-end' : 'justify-start'}`
                                    }, [
                                        React.createElement('div', {
                                            key: 'message-bubble',
                                            className: `max-w-2xl px-4 py-3 rounded-lg ${
                                                message.type === 'user'
                                                    ? 'bg-blue-600 text-white'
                                                    : message.type === 'butler'
                                                    ? 'bg-slate-100 text-slate-900 border border-slate-200'
                                                    : 'bg-amber-50 text-amber-900 border border-amber-200'
                                            }`
                                        }, [
                                            message.type === 'butler' && React.createElement('div', { key: 'butler-header', className: "flex items-center space-x-2 mb-2" }, [
                                                React.createElement(Shield, { key: 'butler-icon', className: "w-4 h-4 text-blue-600" }),
                                                React.createElement('span', { key: 'butler-label', className: "text-xs font-medium text-blue-600 uppercase tracking-wide" }, 'BUTLER AI')
                                            ]),
                                            message.type === 'system' && React.createElement('div', { key: 'system-header', className: "flex items-center space-x-2 mb-2" }, [
                                                React.createElement(AlertCircle, { key: 'system-icon', className: "w-4 h-4 text-amber-600" }),
                                                React.createElement('span', { key: 'system-label', className: "text-xs font-medium text-amber-600 uppercase tracking-wide" }, 'System')
                                            ]),
                                            React.createElement('p', { key: 'message-content', className: "text-sm leading-relaxed whitespace-pre-wrap" }, message.content),
                                            React.createElement('p', {
                                                key: 'message-time',
                                                className: `text-xs mt-2 ${
                                                    message.type === 'user' ? 'text-blue-100' : 'text-slate-500'
                                                }`
                                            }, new Date(message.timestamp).toLocaleTimeString())
                                        ])
                                    ])
                                ),
                                isProcessing && React.createElement('div', { key: 'processing', className: "flex justify-start" }, [
                                    React.createElement('div', { key: 'processing-bubble', className: "bg-slate-100 text-slate-900 px-4 py-3 rounded-lg border border-slate-200" }, [
                                        React.createElement('div', { key: 'processing-header', className: "flex items-center space-x-2" }, [
                                            React.createElement(Shield, { key: 'processing-icon', className: "w-4 h-4 text-blue-600 animate-pulse" }),
                                            React.createElement('span', { key: 'processing-label', className: "text-xs font-medium text-blue-600 uppercase tracking-wide" }, 'BUTLER AI')
                                        ]),
                                        React.createElement('div', { key: 'processing-dots', className: "flex space-x-1 mt-2" }, [
                                            React.createElement('div', { key: 'dot1', className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce", style: { animationDelay: '0ms' } }),
                                            React.createElement('div', { key: 'dot2', className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce", style: { animationDelay: '150ms' } }),
                                            React.createElement('div', { key: 'dot3', className: "w-2 h-2 bg-blue-600 rounded-full animate-bounce", style: { animationDelay: '300ms' } })
                                        ])
                                    ])
                                ]),
                                React.createElement('div', { key: 'messages-end', ref: messagesEndRef })
                            ])
                        ]),

                        // Input Area
                        React.createElement('div', { key: 'input-area', className: "border-t border-slate-200 p-4 bg-slate-50" }, [
                            React.createElement('div', { key: 'input-container', className: "max-w-3xl mx-auto" }, [
                                React.createElement('div', { key: 'input-flex', className: "flex space-x-3" }, [
                                    React.createElement('input', {
                                        key: 'message-input',
                                        type: "text",
                                        value: input,
                                        onChange: (e) => setInput(e.target.value),
                                        onKeyPress: (e) => e.key === 'Enter' && handleSend(),
                                        placeholder: "Ask BUTLER about county operations, emails, or alerts...",
                                        className: "flex-1 px-4 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",
                                        disabled: isProcessing
                                    }),
                                    React.createElement('button', {
                                        key: 'send-button',
                                        onClick: handleSend,
                                        disabled: isProcessing || !input.trim(),
                                        className: "px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2"
                                    }, [
                                        React.createElement(Send, { key: 'send-icon', className: "w-4 h-4" }),
                                        React.createElement('span', { key: 'send-text' }, 'Send')
                                    ])
                                ])
                            ])
                        ])
                    ])
                ])
            ]);
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(ButlerSystem));
    </script>
</body>
</html>